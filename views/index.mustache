<html>
    <head>
        <title>CNH OAuth2 Example</title>
        <link rel="stylesheet" type="text/css" href="../stylesheets/style.css">
        <link rel="stylesheet" type="text/css" href="../stylesheets/prism.css"/>
    </head>
    <body>
        <h1>Welcome to the My CNH API Node Example.</h1>

        <div class="layout">
            <div class="grid-item">
                <div class="grid-container">
                    <form action="/" method="post">
                        <div class="grid-item">
                            <label id="scopeLabel" for="scope">Scope:</label><br/>
                            <input placeholder="offline_access"
                                name="scope"
                                id="scope"
                                aria-label="scopeLabel"
                                value="{{scope}}"
                                required>
                        </div>

                        <div class="grid-item">
                            <label id="clientIdLabel" for="clientId">Client Id:</label><br/>
                            <input name="clientId"
                                id="clientId"
                                placeholder="Enter your client Id"
                                aria-label="clientIdLabel"
                                value="{{clientId}}"
                                required>
                        </div>

                        <div class="grid-item">
                            <label id="clientSecretlabel" for="clientSecret">Client Secret:</label><br/>
                            <input type="password"
                                name="clientSecret"
                                id="clientSecret"
                                placeholder="Enter your client secret"
                                aria-label="clientSecretlabel"
                                value="{{clientSecret}}"
                                required>
                        </div>

                        <div class="grid-item">
                            <label id="callBackLabel" for="callbackUrl">Callback URL:</label><br/>
                            <input type="url"
                                name="callbackUrl"
                                id="callbackUrl"
                                placeholder="http://localhost:3000"
                                aria-label="callBackLabel"
                                value="{{callbackUrl}}"
                                required>
                        </div>

                        <div class="grid-item">
                            <label id="audienceLabel" for="audience">Audience:</label><br/>
                            <input type="url"
                                name="audience"
                                id="audience"
                                placeholder="https://stg.api.cnhind.com"
                                aria-label="audienceLabel"
                                value="{{audience}}"
                                required>
                        </div>

                        <div class="grid-item">
                            <input type="submit" value="Connect!">
                        </div>

                        <div class="grid-item">

                        </div>

                        <div class="grid-item">

                        </div>
                    </form>
                </div>
            </div>

            {{#accessToken}}
            <div class="grid-item">
                <div class="grid-container">
                    <div class="grid-item">
                        Access Token: <br/>

                        {{#accessToken}}
                            <p class="token">{{accessToken}} <br/> <a onclick="toggleDiv('deets')" href="#">Toggle
                                Details</a>
                            </p>

                            <div id="deets" style="display: none;">
                                <pre><code class="language-json">{{accessTokenDetails}}</code></pre>
                            </div>
                        {{/accessToken}}
                    </div>

                    <div class="grid-item">
                        Expiration: <br/>
                        <div id="deets">{{expiration}}</div>
                    </div>

                    <div class="grid-item">
                        Refresh Token: <br/>
                        {{#refreshToken}}
                            <p class="token">{{refreshToken}} <br/><a href="/refresh-access-token">Refresh The Access
                                Token</a>
                            </p>
                        {{/refreshToken}}
                    </div>


                </div>
            {{/accessToken}}
        </div>
        </div>
        {{#accessToken}}
            <div class="grid-container">
                <form method="post" action="/call-api">
                    <div class="grid-item">
                        <label id="urlLabel" for="url"> Simple API Invoke With Token:</label>
                        <input type="url" id="url" name="url" aria-label="urlLabel"
                            value="{{apiUrl}}/organizations"/>
                    </div>
                    <div class="grid-item">
                        <input type="submit" value="Go!">
                    </div>
                    {{#apiResponse}}
                        <div class="grid-item">
                        <pre class="token">
                            <code class="language-json">
                                {{apiResponse}}
                            </code>
                        </pre>
                        </div>
                    {{/apiResponse}}
                </form>

            </div>
        {{/accessToken}}
        <script type="text/javascript" src="../javascripts/functions.js"></script>
        <script type="text/javascript" src="../javascripts/prism.js"></script>
    </body>
</html>
